# Короткое введение в Java + Maven

## 1) Что потребуется
* Среда разработки (рекомендуется [IntelliJ IDEA](https://www.jetbrains.com/idea/download/?section=windows))
* JDK версии 21 или выше (среда разработки установит сама)
* Maven

## 2) Создаём простой проект в IDE и компилируем его в консоли

**Шаг 0. Готовим окружение и `PATH`**  
Задача — чтобы `java`, `javac` и `mvn` были доступны в любой консоли.

* **Проверяем доступность инструментов:**

  ```bash
  java --version
  javac --version
  mvn -v
  ```

Если команды не находятся — нужно добавить в `PATH` путь к папке bin.

Примерный путь к Maven:  
C:\Program Files\JetBrains\\<ваша версия IDE>\plugins\maven\lib\maven3\bin

Примерный путь к JDK:  
C:\Users\<user>\.jdks\\<ваша версия JDK>\bin

**Шаг 1. Создаём простой Java-проект в IntelliJ IDEA (без Maven)**

IDE создаст минимальную структуру с папкой `src`.
Код:

  ```java
  package com.example;

  public class Hello {
      public static void main(String[] args) {
          System.out.println("Hello from IDE!");
      }
  }
  ```

**Шаг 2. Запускаем тот же код из консоли (ручная компиляция)**

1. **Откройте терминал в корне проекта** `hello` (где лежит папка `src`).

    * В IntelliJ: на снизу на левой панели значок терминала.
    * Либо откройте системный терминал в корневой папке проекта.

2. **Создаём папку для скомпилированных классов** (выходной каталог):

    * Windows (PowerShell/CMD):

      ```powershell
      mkdir out
      ```

3. **Компилируем исходник в байткод (`.class`)**:

    * Windows:

      ```powershell
      javac -d out src\Hello.java
      ```

   Что здесь происходит:

    * `javac` — компилятор Java.
    * `-d out` — сложить все скомпилированные `.class` в папку `out`, сохраняя структуру пакетов.

4. **Смотрим, что получилось**:

    В `out` появилcя файл `out/Hello.class`.  

5. **Запускаем JVM на скомпилированных классах**:

    * macOS/Linux/Windows:
      ```bash
      java -cp out Hello
      ```

   Пояснения:

    * `java` — запуск байткода на JVM.
    * `-cp out` — `classpath`, где искать классы (наша папка `out`). -cp (или -classpath) говорит JVM/javac, где искать ваши классы.
    * `Hello` — **полное имя класса**, а не путь к файлу.

**Шаг 3. Собираем исполняемый JAR**

1. Находясь в корне проекта:

   ```bash
   jar --create --file out/hello.jar --main-class Hello -C out .
   ```

   Что делает команда:

    * `jar --create --file out/hello.jar` — создаёт архив JAR.
    * `--main-class Hello` — прописывает в манифест главный класс.
    * `-C out .` — взять все классы из каталога `out`.

2. Запуск:

   ```bash
   java -jar out/hello.jar
   ```
---

## 3) Maven

### 3.1 Создаём новый Maven-проект с «Hello» в IntelliJ IDEA (или используйте этот)

1. **File → New Project → Maven** (можно выбрать archetype `maven-archetype-quickstart`).
2. **SDK:** JDK 21, **GroupId:** `com.example`, **ArtifactId:** `hello-mvn`.

### 3.2 Ключевые **фазы** стандартного жизненного цикла

* `validate` — проверка корректности структуры проекта;
* `compile` — компиляция `src/main/java`;
* `test` — запуск юнит-тестов (`src/test/java`);
* `package` — упаковка артефакта (обычно JAR в `target/`);
* `verify` — доп. проверки качества (если настроены плагины);
* `install` — установка артефакта в локальный репозиторий `~/.m2`;
* `deploy` — публикация в удалённый репозиторий (CI/CD).

Ещё есть отдельный цикл `clean` (удаляет `target/`) и `site` (генерация сайта/отчётов).

### 3.3 Собираем JAR и запускаем проект из консоли

Собираем:

```bash
mvn clean package
```

Запускаем байткод классом (в quickstart-JAR нет `Main-Class` в манифесте):

```bash
java -cp target/hello-mvn-1.0-SNAPSHOT.jar ru.mfa.App
```

### 3.4 Добавляем `exec-maven-plugin` и запускаем

Чтобы не возиться с `-cp` и манифестами, нужно добавить в конец pox.xml плагин, упрощающий запуск:

```xml
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>exec-maven-plugin</artifactId>
      <version>3.2.0</version>
      <configuration>
        <mainClass>ru.mfa.App</mainClass>
      </configuration>
    </plugin>
  </plugins>
</build>
```

Запуск:

```bash
mvn clean compile exec:java
# или
mvn clean package exec:java
# или после первых двух
mvn exec:java
```

> Maven скомпилирует проект и запустит `main` без указания classpath.


# Задание 1
* Создать Java проект с фреймворком Spring Boot версии 3.5.5 или выше;
* Опубликовать его на Github;
* Создать простые контроллеры, чтобы посмотреть, как с ними можно работать.

Инструмент для автоматического создания проекта на Spring Boot: [Spring Initializer](https://start.spring.io/)  
[Дополнительные обучающие материалы](https://spring.io/)

# Задание 2
* Выбрать тему из предложенных в [файле](./files/Варианты_РБПО_2025.xlsx) (либо предложить свою);
* Для каждой сущности реализовать методы контроллера для: Создания, Получения, Удаления и Изменения;
* Продумать, какие функции в дальнейшем будет предоставлять ваш сервис.  
Скачать [Postman](https://www.postman.com/downloads/)  
[Коллекция](./files/РБПО_Практика_2025.postman_collection.json) Postman c запросами с пар

# Задание 3

1. **Добавьте базу данных к своему проекту**
   * Установите любую реляционную БД (в нашем примере [PostgreSQL](https://www.postgresql.org/download/));
   * Не забывайте убрать чувствительные данные конфигурации в env;
   * Создайте таблицы для каждой сущности вашей предметной области;
   * Создайте связи между таблицами;
   * Добавьте уникальность/ограничения для тех свойств сущности, где считаете необходимым.
   * Заполните несколько тестовых записей, чтобы было что проверять.
2. **Переведите CRUD на БД**
   * Контроллеры из Задания 2 (создать/получить/изменить/удалить) должны теперь читать и писать **в БД**, а не в память.
3. **Добавьте 5 бизнес-операций** (не просто CRUD)
   * Реализуйте операции, которые будут логичны для вашей темы. (Например, оформление заказа или бронирование чего-либо);
   * Если операция затрагивает несколько таблиц — оформите их в одной транзакции.
4. **Подготовьте коллекцию запросов, демонстрирующую работу ваших новых операций**
   * Добавьте все запросы: CRUD по каждой сущности и новые бизнес-операции;
   * Примеры тел запросов (JSON), переменные окружения при необходимости;
   * Проверьте, что можно прогнать сценарий (создать данные → выполнить операцию → увидеть результат).
5. **Короткий README**  
   В корне проекта напишите:
      * Какую тему вы реализуете;
      * Какие основные сущности используются для этого;
      * Какие операции умеет выполнять ваш сервис.

### Дополнительные материалы к заданию 3: 
* [Документация по JPA в Spring](https://docs.spring.io/spring-data/jpa/reference/jpa.html)
* [Отношения между таблицами](https://www.baeldung.com/spring-data-rest-relationships)
* [Типы каскадных операций](https://www.baeldung.com/jpa-cascade-types)
* [Транзакции](https://docs.spring.io/spring-data/jpa/reference/jpa/transactions.html)
* [Курс и шпаргалка по SQL](https://proglib.io/p/sql-cheat-sheet)

# Задание 4

1. **Подключите SpringSecurity к своему проекту**
2. **Проведите базовую настройку, включив Basic Auth и настроив CSRF токены**
3. **Добавьте пользователей в свой проект, вводя отдельный класс или используя существующий**
4. **Настройте авторизацию в своём сервисе по ролям или разрешениям для каждой конечной точки вашего приложения**
5. **Добавьте процедуру регистрации**
6. **Сделайте проверку надёжности пароля при регистрации (например длина и наличие спецсимволов)**
7. **Подготовьте почву для аутентификации по логину и паролю (пока мы используем BasicAuth она нам отдельно не требуется, но в будущем понадобится)**
8. **Убедитесь, что все операции работают правильно и все доступы выдаются согласно настройкам**

> **!ВАЖНО!**: избегайте добавления пользователей в базы в явном виде. Не используйте хранение пользователей в коде или скриптах!

### Дополнительные материалы к заданию 4:
* [Документация SpringSecurity](https://spring.io/projects/spring-security)


